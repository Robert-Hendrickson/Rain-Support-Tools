<!DOCTYPE html>
<html>
    <!--
        reference for build
        \Rain-Support-Tools\imgs\feedifferencebase.png
        quick ideas:
        1. amex button that hides or displays rate options for amex cards separately
           a. if amex is separate calculations will need to be run to find rows using amex rates for calculation
        2. popup import option to paste copied data. Needs to be broken down into a usable object for looping through to create table data. Potentially look into option of uploading a csv spreadsheet version.
    -->
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <style>
            /*page containers*/
            div#transactions{
                width: 720px;
                float: left;
            }
            div#rates{
                width: 400px;
                float: left;
            }
            div#rates #rateTables, div#rates #amexSelector{
                float: left;
            }
            /*table styles*/
            table{
                border-spacing: 0px;
            }
            table thead th, table tbody td{
                border-right: 2px #000 solid;
                border-top: 2px #000 solid;
                border-bottom: 2px #000 solid;
                padding: 4px;
            }
            table thead th:first-child, table tbody td:first-child{
                border-left: 2px #000 solid;
            }
            #rates td input{
                width: 50px;
            }
            /*amex card rates*/
            .amex{
                display: none;
            }
            .amex.show{
                display: block;
            }
        </style>
    </head>
    <body>
        <div id="transactions">
            <table>
                <thead>
                    <tr>
                        <th>Transaction Date</th>
                        <th>Transactions</th>
                        <th>Method</th>
                        <th>Status</th>
                        <th>Payout</th>
                        <th>Collected</th>
                        <th>Fees</th>
                        <th>Refunds</th>
                        <th>Net</th>
                        <th>Difference</th>
                    </tr>
                </thead>					
            </table>
        </div>
        <div id="rates">
            <div id="rateTables">
                <table id="cardPresent">
                    <thead>
                        <tr>
                            <th colspan="2">Card Present</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Fee Rate</td>
                            <td><input id="cardPresentRate"></td>
                        </tr>
                        <tr>
                            <td>Amount per transaction</td>
                            <td><input id="cardPresentAmount"></td>
                        </tr>
                    </tbody>
                </table>
                <br />
                <table class="amex" id="amexcardPresent">
                    <thead>
                        <tr>
                            <th colspan="2">Amex Card Present</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Fee Rate</td>
                            <td><input id="amexcardPresentRate"></td>
                        </tr>
                        <tr>
                            <td>Amount per transaction</td>
                            <td><input id="amexcardPresentAmount"></td>
                        </tr>
                    </tbody>
                </table>
                <br />
                <table id="cardNotPresent">
                    <thead>
                        <tr>
                            <th colspan="2">Card Not Present</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Fee Rate</td>
                            <td><input id="cardNotPresentRate"></td>
                        </tr>
                        <tr>
                            <td>Amount per transaction</td>
                            <td><input id="cardNotPresentAmount"></td>
                        </tr>
                    </tbody>
                </table>
                <br />
                <table class="amex" id="amexcardNotPresent">
                    <thead>
                        <tr>
                            <th colspan="2">Amex Card Not Present</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Fee Rate</td>
                            <td><input id="amexcardNotPresentRate"></td>
                        </tr>
                        <tr>
                            <td>Amount per transaction</td>
                            <td><input id="amexcardNotPresentAmount"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div id="amexSelector">
                <input type="checkbox" id="amexCheck" onclick="amexDisplayToggle()" />Different Amex Rates
            </div>
        </div>
        <script>
            function amexDisplayToggle(){
                let checked = $('input#amexCheck')[0].checked;
                if(checked){
                    $('.amex').addClass('show');
                };
                if(!checked){
                    $('.amex').removeClass('show');
                };
            };

            /*This is a usable regex that will find all occurances from a coppied set of data out of rain.
            (\d{2}:\d{2}:\d{2} [APMapm]{2})\n(\d+)\n(.*?)\n(.*?)\n([A-Za-z]{3} \d{1,2}, \d{4})\n(-{0,1}\$[\d.,]+)\n(-{0,1}\$[\d.,]+)\n(-{0,1}\$[\d.,]+)\n(-{0,1}\$[\d.,]+)

            can be used with x.match(/regex/g) to find all transactions
            y[i].split('\n') can find each piece of the lines to create object based variables.

            {
                dateNum: [0],
                transaction: [1],
                atTill: [2],
                status: [3],
                dateText: [4],
                collected: [5],
                fee: [6],
                return: [7],
                totalPayout: [8]
            }

            test string: should have 5 transactions listed
04:35:05 AM
1400120209
Card Not Present
Completed
Jan 17, 2024
$24.28
-$1.00
$0.00
$23.28
04:35:05 AM
1400120210
Card Not Present
Completed
Jan 17, 2024
$24.28
-$1.00
$0.00
$23.28
04:35:06 AM
1400120211
Card Not Present
Completed
Jan 17, 2024
$27.60
-$1.10
$0.00
$26.50
04:35:06 AM
1400120212
Card Not Present
Completed
Jan 17, 2024
$27.60
-$1.10
$0.00
$26.50
04:35:09 AM
1400120213
Card Not Present
Completed
Jan 17, 2024
$27.60
-$1.10
$0.00
$26.50
            */
        </script>
    </body>
</html>