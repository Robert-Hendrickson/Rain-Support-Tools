<!DOCTYPE html>
<html>
    <head>
        <title>DNS-Tool</title>
        <link rel="stylesheet" href="./dns-help.css" />
        <script src="https://kit.fontawesome.com/8e52a98e38.js" crossorigin="anonymous"></script>
        <script src="./dnsCtrl.js" type="module"></script>
        <script src="/Rain-Support-Tools/src/common/testing/test_data.js" type="module"></script>
        <meta title="DNS-Tool" />
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBB64CR2LL"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-ZBB64CR2LL');
        </script>
    </head>
    <body id="dns-help">
        <div class="menu-wrapper">
            <nav-menu></nav-menu>
            <script src="/Rain-Support-Tools/src/common/navigation/nav-builder.js" type="module"></script>
        </div>
        <h1>
            DNS Help Tool - Design by Russell Lee
        </h1>
        <div class="body-container">
            <div id="info-tabs">
                <div id="action-tab" step="1" :class="{'active': current_step === 1, 'complete': current_step > 1}">
                    <div class="step-circle">1</div>
                    Record Information
                </div>
                <div id="confirmation-tab" step="3" :class="{'active': current_step === 2,'in-active': current_step < 2}">
                    <div class="step-circle">3</div>
                    Confirm Information
                </div>
            </div>
            <div class="container content">
                <div id="basic-content" data="1"  :class="{'active': current_step === 1, 'complete': current_step > 1}">
                    <text-input-component
                        label="Enter Domain being worked on:"
                        id="domain"
                        placeholder="websiteUrl.com"
                        :value="domain"
                        @update-value="updateDomainValue"
                    ></text-input-component>
                    <option-picker-component
                        label="Select the action that needs to happen with Records:"
                        id="actions"
                        :options="actionOptions"
                        :value="actionsList"
                        multi-select
                        @update-value="updateSelectedActions"
                    ></option-picker-component>
                    <add-records
                        :actions="actionsList"
                        :records="addRecordList"
                        @add-new-record="addNewAddRecord"
                        @delete-record="deleteAddRecord"
                        @remove-row="removeAddRow"
                        @edit-record="openAddRecordEditor"
                    ></add-records>
                    <correct-records
                        :actions="actionsList"
                        :records="correctRecordList"
                        @add-new-record="addNewCorrectRecord"
                        @delete-record="deleteCorrectRecord"
                        @remove-row="removeCorrectRow"
                        @edit-record="openCorrectRecordEditor"
                    ></correct-records>
                    <remove-records
                        :actions="actionsList"
                        :records="removeRecordList"
                        @add-new-record="addNewRemoveRecord"
                        @delete-record="deleteRemoveRecord"
                        @remove-row="removeRemoveRow"
                        @edit-record="openRemoveRecordEditor"
                    ></remove-records>
                </div>
                <div id="confirm" data="3" :class="{'active': current_step === 2, 'in-active': current_step < 2}">
                    <div compiled-results>
                        <h2>Please Confirm records are correct and none are missing.</h2>
                        <div v-if="actionsList.includes('Add Record(s)')">
                            <h2>Records to be Added</h2>
                            <data>
                                <div class="value-display" v-for="record in addRecordList">
                                    Record Type: {{record.type}}<br>
                                    Name: {{record.name}}<br>
                                    Value: {{record.value}}<br>
                                    TTL: {{record.ttl}}
                                </div>
                            </data>
                        </div>
                        <div v-if="actionsList.includes('Correct Existing Record(s)')">
                            <h2>Records to be Corrected</h2>
                            <data>
                                <div class="value-display" v-for="record in correctRecordList">
                                    <div class="value-header">
                                        <div>Original Values</div>
                                        <div>New Values</div>
                                    </div>
                                    <div class="correct-record">
                                        <div class="value-display">
                                            Record Type: {{record.type}}<br>
                                            Name: {{record.name}}<br>
                                            Value: {{record.value}}<br>
                                            TTL: {{record.ttl}}
                                        </div>
                                        <div class="value-display">
                                            Record Type: {{record.newType}}<br>
                                            Name: {{record.newName}}<br>
                                            Value: {{record.newValue}}<br>
                                            TTL: {{record.newTtl}}
                                        </div>
                                    </div>
                                </div>
                            </data>
                        </div>
                        <div v-if="actionsList.includes('Remove Record(s)')">
                            <h2>Records to be Removed</h2>
                            <data>
                                <div class="value-display" v-for="record in removeRecordList">
                                    Record Type: {{record.type}}<br>
                                    Name: {{record.name}}<br>
                                    Value: {{record.value}}<br>
                                    TTL: {{record.ttl}}
                                </div>
                            </data>
                        </div>
                    </div>
                </div>
            </div>
            <flow-ctrl-app
                ref="flowCtrlApp"
                :max-step="2"
                @step-change-request="validateStepData"
                @step-changed="handleNextStep"
                @previous-step="handlePreviousStep"
                @finish="handleFinish"
            ></flow-ctrl-app>
        </div>
        <ticket-data-ctrl
            ref="ticketDataCtrl"
            :ticket-data="ticketData"
            @reset-ticket="resetTicket"
        ></ticket-data-ctrl>
        <error-ctrl
            ref="errorCtrl"
        ></error-ctrl>
        <record-editor ref="recordEditor"
            :show="showRecordEditor"
            :record="currentRecord"
            :is-correction="isCorrection"
            :domain="domain"
            @save="updateRecord"
            @close-editor="closeRecordEditor"
        ></record-editor>
    </body>
</html>