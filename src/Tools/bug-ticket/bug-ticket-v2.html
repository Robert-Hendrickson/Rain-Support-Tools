<!DOCTYPE html>
<html>
    <head>
        <meta title="Bug v2" />
        <title>Bug v2</title>
        <link rel="stylesheet" href="./bug-ticket-v2.css" />
        <link rel="stylesheet" href="/Rain-Support-Tools/src/common/actions/popup.css" />
        <script src="https://kit.fontawesome.com/8e52a98e38.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script src="/Rain-Support-Tools/src/common/ctrl/cookie_ctrl.js"></script>
        <script src="/Rain-Support-Tools/src/common/flow-format/flow-ctrl.js"></script>
        <script src="/Rain-Support-Tools/src/common/actions/popup.js"></script>
        <script src="/Rain-Support-Tools/src/modules/dialog-ctrl.js"></script>
        <script src="/Rain-Support-Tools/src/common/ctrl/banner_updates.js"></script>
        <script src="./bug-ticket-v2.js"></script>
        <script src="/Rain-Support-Tools/src/common/testing/test_data.js"></script>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBB64CR2LL"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-ZBB64CR2LL');
        </script>
    </head>
    <body>
        <div class="menu-wrapper">
            <div onclick="toggleNav()" id="nav-toggle">
                <span class="fa-solid fa-bars"></span>
            </div>
            <nav-menu></nav-menu>
            <script src="/Rain-Support-Tools/src/common/navigation/nav-builder.js"></script>
        </div>
        <div id="past-ticket-container" style="display: none;">
            <div id="list-toggle">
                0
            </div>
            <past-tickets></past-tickets>
        </div>
        <h1>
            Bug Ticket Form Generator - Design by Russell Lee
        </h1>
        <div style="margin: 10px auto; width: 217px;">
            <button class="btn secondary" onclick="document.querySelector('#salesforce-bug-calc-tips').classList = '';">
                Salesforce Bug Calculator Tips
            </button>
        </div>
        <div class="body-container">
            <div id="info-tabs">
                <div id="basic-tab" step="1" class="active">
                    <div class="step-circle">1</div>
                    Basic
                </div>
                <div id="steps-tab" step="2">
                    <div class="step-circle">2</div>
                    Steps
                </div>
                <div id="description-tab" step="3">
                    <div class="step-circle">3</div>
                    Desc.
                </div>
                <div id="links-tab" step="4">
                    <div class="step-circle">4</div>
                    Screenshots
                </div>
                <div id="examples-errors-tab" step="5">
                    <div class="step-circle">5</div>
                    Examples
                </div>
            </div>
            <div class="container content">
                <div style="z-index: 1;" id="basic-content" data="1"  class="active">
                        <div class="note">
                            <div class="title">CRM</div>
                            <span class="fa-solid fa-question"></span>
                            <div class="tip">Test help notes</div>
                        </div><br>
                        <input id="crm" type="text" placeholder="Enter a CRM" />
                        <br>
                        System Area Affected<br>
                        <input id="systemArea" type="text" placeholder="Enter Part of the System Affected" />
                        <br>
                        Can you replicate this on a Test Site or Customers Site?<br>
                        <div choice-selector replicable-selector>
                            <div replicable='yes'>Yes</div>
                            <div replicable='no'>No</div>
                        </div><br>
                        Where were able to replicate the behavior?(If 'yes' to above select any below that apply)
                        <div choice-selector where-selector>
                            <div where='Test'>Test Site</div>
                            <div where='Customer'>Customer Site</div>
                        </div>
                </div>
                <div style="z-index: 2;" id="steps-content" data="2" class="in-active">
                    <div table-controls>
                        <button tabindex="-1" class="btn secondary" onclick="addTableRow('steps-table')">Add Row</button>
                        <button tabindex="-1" class="btn secondary" onclick="removeTableRow('steps-table')">Remove Row</button>
                    </div>
                    <table id="steps-table">
                        <tbody>
                            <tr>
                                <td>
                                    Step 1<input tabindex="-1" placeholder="Enter Step 1" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Step 2<input tabindex="-1" placeholder="Enter Step 2" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Step 3<input tabindex="-1" placeholder="Enter Step 3" type="text" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="z-index: 3;" id="description-content" data="3" class="in-active">
                    Description: <br>
                    <textarea tabindex="-1" placeholder="Enter a Description" id="description"></textarea>
                </div>
                <div style="z-index: 4;" id="links-content" data="4" class="in-active">
                    <h2>Screenshots</h2>
                    <div table-controls>
                        <button tabindex="-1" class="btn secondary" onclick="addTableRow('screenshot-table')">Add Row</button>
                        <button tabindex="-1" class="btn secondary" onclick="removeTableRow('screenshot-table')">Remove Row</button>
                    </div>
                    <table id="screenshot-table">
                        <tbody>
                            <tr>
                                <td>
                                    Image 1<input tabindex="-1" placeholder="Enter Image Link" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Image 2<input tabindex="-1" placeholder="Enter Image Link" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Image 3<input tabindex="-1" placeholder="Enter Image Link" type="text" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <h2>Videos</h2>
                    <div table-controls>
                        <button tabindex="-1" class="btn secondary" onclick="addTableRow('video-table')">Add Row</button>
                        <button tabindex="-1" class="btn secondary" onclick="removeTableRow('video-table')">Remove Row</button>
                    </div>
                    <table id="video-table">
                        <tbody>
                            <tr>
                                <td>
                                    Video 1<input tabindex="-1" placeholder="Enter Video Link" type="text" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="z-index: 5;" id="examples-errors-content" data="5" class="in-active">
                    Examples: <br>
                    <textarea tabindex="-1" placeholder="Enter example data. This can be links to web pages where things are wrong or id's of products, RTO's, etc." id="examples"></textarea>
                    <br>
                    Console Errors: <br>
                    <span class="sub-text">Copy the console error from the console then paste the info into the below box. Do not enter this box with "See Video" or similar options.</span>
                    <textarea tabindex="-1" placeholder="Enter any console errors that appear during the issue" id="errors"></textarea>
                </div>
            </div>
            <div flow-controls>
                <button prev class="btn secondary hide" style="font-size: 12px;" onclick="previousStep()">Previous</button>
                <button class="btn primary hide" finish style="float: right;" onclick="validateData()">Finish</button>
                <button class="btn primary" next style="float: right;" onclick="validateData()">Next</button>
            </div>
        </div>
        <div id="ticket-container" class="hide">
            <div>
                <textarea></textarea>
                <div ticket-buttons>
                    <button style="float: left;" class="btn terciary" onclick="start_new_ticket()">New Case</button>
                    <button class="btn secondary" onclick="$('#ticket-container').addClass('hide')">Close</button>
                    <button class="btn primary" onclick="copyTicket()">Copy</button>
                </div>
            </div>
        </div>
        <div id="error_message" class="hide"></div>
        <div id="salesforce-bug-calc-tips" class="hide">
            <span class="close" onclick="this.parentElement.classList = 'hide'">X</span>
            <h3 style="color: #f00;">These are just helpful suggestions to consider and not exact points. If you have concerns of a bug please consult with Support Leadership about how things should be answered.</h3>
            <div class="question-wrapper">
                <div class="question-title">
                    Shoppers Affected?
                </div>
                <div class="question-suggestion">
                    This question refers to when the issue that is happening is affecting the ability for a stores customers to accomplish tasks that are designed for their interaction.
                    <ul>
                        <div>Example Scenarios</div>
                        <li>Links not going where they should</li>
                        <li>Add to Cart Buttons not working</li>
                        <li>Incorrect funds getting charged</li>
                    </ul>
                </div>
            </div>
            <div class="question-wrapper">
                <div class="question-title">
                    Incorrect Data?
                </div>
                <div class="question-suggestion">
                    This question refers to seeing issues where either data doesn't match or isn't displaying/acting as expected.
                    <ul>
                        <div>Example Scenarios</div>
                        <li>Reports not displaying data correctly (missing transactions or not totalling values)</li>
                        <li>Saved Values are not displaying in area's where they are expected</li>
                    </ul>
                </div>
            </div>
            <div class="question-wrapper">
                <div class="question-title">
                    Currently in Beta?
                </div>
                <div class="question-suggestion">
                    This question refers to if the area being reported is a new part of the system that is still in beta.
                    <ul>
                        <div>Example Scenarios</div>
                        <li>A new module is developed and there is an issue saving data in it</li>
                        <li>A new report isn't displaying data correctly</li>
                    </ul>
                </div>
            </div>
            <div class="question-wrapper">
                <div class="question-title">
                    Is Inventory Affected?
                </div>
                <div class="question-suggestion">
                    This question refers to if the issue is affecting the way the system handles/handled inventory.
                    <ul>
                        <div>Example Scenarios</div>
                        <li>A transaction that was completed didn't remove inventory</li>
                        <li>Adding a serial number duplicated it in the system</li>
                        <li>The issue incorrectly recorded the amount of inventory adjusted</li>
                    </ul>
                </div>
            </div>
            <div class="question-wrapper">
                <div class="question-title">
                    Money: Collecting Incorrect Amounts?
                </div>
                <div class="question-suggestion">
                    This question refers to the system not collecting funds in the amounts it should.
                    <ul>
                        <div>Example Scenarios</div>
                        <li>A completed transaction says it was for $15, but processing shows it captured lower or higher than the amount it should</li>
                        <li>An Authorized web order shows a different authorized amount than what it is attempting to capture before the customer has made changes to the order.</li>
                    </ul>
                </div>
            </div>
            <div class="question-wrapper">
                <div class="question-title">
                    Prevention of Saving in Key Areas?
                </div>
                <div class="question-suggestion">
                    This question refers to the system having issues saving data. Key area's are area's that a user of the system either manually makes a change or would expect to see a change based on input from the user.
                    <ul>
                        <div>Example Scenarios</div>
                        <li>Saving a product but the title doesn't update even after a succesful save</li>
                        <li>Clicking the save button on the settings page gets an error</li>
                        <li>Saved data in a product looks correct on the product page, but isn't reflected on the website</li>
                    </ul>
                </div>
            </div>
            <div class="question-wrapper">
                <div class="question-title">
                    Suitable workaround Available?
                </div>
                <div class="question-suggestion">
                    This question refers to whether or not there is another way for the customer to accomplish what the issue is preventing them from doing that doesn't go outside of the bounds of the system.
                </div>
            </div>
            <div class="question-wrapper">
                <div class="question-title">
                    Is reproducible?
                </div>
                <div class="question-suggestion">
                    This question refers to if you can consistently reproduce the issue happening.
                    <ul>
                        <div>Example Scenarios</div>
                        <li>Everytime a specific character is saved in a field an error message appears</li>
                        <li>Loading a specific day in the report shows incorrect data</li>
                    </ul>
                </div>
            </div>
            <script>
                document.querySelectorAll('.question-title').forEach((element) => {
                    element.addEventListener('click',(el) => {
                        let suggestion_element = el.target.nextElementSibling;
                        if (suggestion_element.classList.contains('show')) {
                            suggestion_element.classList.remove('show');
                        } else {
                            document.querySelector('.question-suggestion.show')?.classList.remove('show');
                            suggestion_element.classList.add('show');
                        }
                    })
                });
            </script>
        </div>
    </body>
</html>