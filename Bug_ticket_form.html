<!DOCTYPE html>
<html>
    <head>
        <style>
            #input-values {
                width: 100%;
                border: #000 5px solid;
                min-height: 277px;
            }
            #input-values > table table {
                float: left;
            }
            .bug-glitch-ticket {
                width: 100%;
                float: left;
            }
            textarea {
                height: 75px;
                width: 197px;
            }
            #input_error {
                display: none;
                color: red;
            }
            #bug-glitch-ticket {
                min-height: 990px;
                width: 925px;
            }
            div.reset-popup{
                background-color: #808080;
                position:absolute;
                left:40%;
                top: 30%;
            }
        </style>
        <style id="error-borders">

        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script>
            //set regex value to be checked against
            let regex_na = new RegExp('^(n|N)\/*(a|A)');
            function reset() {
                $('#error-borders')[0].innerHTML =''
                $('#input_error').css('display','none');
                var reset_values = ["crm_input", "system_input", "steps_input", "description_input", "example_input", "screenshot_input", "video_input", "expectation_input", "console_input"]
                for(let i = 0; i < reset_values.length; i++){
                    let remove = reset_values[i];
                    $(`#${remove}`)[0].value = '';
                };
                let base_ticket = `**LOCATION:**
Store ID:

System Area:

Can you recreate the problem on your demo site (if yes please continue, if no use the "Bug - non reproducible" macro)?

STEPS TO REPRODUCE:
1.
2.
3.

ACTUAL RESULTS:(Please be as detailed as possible.)

Description:

Example:(If this pertains to the customer's site, please provide links to the relevant pages.)

Screenshot:

Video:

EXPECTED RESULTS:

CONSOLE ERRORS:`;
                $('#bug-glitch-ticket')[0].value = base_ticket;
                $('div.reset-popup')[0].setAttribute('style','display: none;');
            };
            let ticket_output = '';
            let entered_info = '';
            let split_info = '';
            let replicable_steps = '';
            let output_example = '';
            let screenshot_output = '';
            let video_output = '';
            function checkInputs() {
                $('#input_error').css('display','none');
                var inputs = {
                    "crm": $('#crm_input')[0].value,
                    "area": $('#system_input')[0].value,
                    "replicable": $('#replicable_input')[0].value,
                    "steps": $('#steps_input')[0].value,
                    "description": $('#description_input')[0].value,
                    "example": $('#example_input')[0].value,
                    "screenshots": $('#screenshot_input')[0].value,
                    "videos": $('#video_input')[0].value,
                    "expectation": $('#expectation_input')[0].value,
                    "console": $('#console_input')[0].value
                };
                if(inputs.crm && inputs.area && inputs.replicable && inputs.steps && inputs.description && (inputs.example && !regex_na.test(inputs.example)) && (inputs.screenshots && !regex_na.test(inputs.screenshots)) && (inputs.videos && !regex_na.test(inputs.videos)) && inputs.expectation && inputs.console){
                    $('#error-borders')[0].innerHTML ='';
                    generateTicket();
                }else{
                    let borders = '';
                    function addBorder(newborder){
                        if(borders){
                            borders = borders +`, ${newborder}`;
                        }else{
                            borders = borders +`${newborder}`;
                        };
                    };
                    $('#input_error').css('display','block');
                    if(!inputs.crm){
                        addBorder('#crm_input');
                    };
                    if(!inputs.area){
                        addBorder('#system_input');
                    };
                    if(!inputs.replicable){
                        addBorder('#replication_input');
                    };
                    if(!inputs.steps){
                        addBorder('#steps_input');
                    };
                    if(!inputs.description){
                        addBorder('#description_input');
                    };
                    if(!inputs.example | regex_na.test(inputs.example)){
                        addBorder('#example_input');
                    };
                    if(!inputs.screenshots | regex_na.test(inputs.screenshots)){
                        addBorder('#screenshot_input');
                    };
                    if(!inputs.videos | regex_na.test(inputs.videos)){
                        addBorder('#video_input');
                    };
                    if(!inputs.expectation){
                        addBorder('#expectation_input');
                    };
                    if(!inputs.console){
                        addBorder('#console_input');
                    };
                    $('#error-borders')[0].innerHTML = `
                        ${borders} {
                            border-color: red !important;
                        }`;
                };
            };
            function generateTicket() {
                replication_steps = '';
                entered_info = $('#steps_input')[0].value;
                split_info = entered_info.split('\n');
                for(var i=0; i<split_info.length; i++){
                    replication_steps = replication_steps + `${split_info[i]}\n`;
                };
                output_example = '';
                entered_info = $('#example_input')[0].value;
                split_info = entered_info.split('\n');
                for(var i=0; i<split_info.length; i++){
                    output_example = output_example + `${split_info[i]}\n`;
                };
                screenshot_output = '';
                entered_info = $('#screenshot_input')[0].value;
                split_info = entered_info.split('\n');
                for(var i=0; i<split_info.length; i++){
                    screenshot_output = screenshot_output + `${split_info[i]}\n`;
                };
                video_output = '';
                entered_info = $('#video_input')[0].value;
                split_info = entered_info.split('\n');
                for(var i=0; i<split_info.length; i++){
                    video_output = video_output + `${split_info[i]}\n`;
                };
                let is_replicable = '';
                let replicable_input = $('#replicable_input')[0].value;
                if(replicable_input === 'Yes'){
                    is_replicable = 'STEPS TO REPRODUCE:';
                }else{
                    is_replicable = 'ATTEMPTED STEPS TO REPRODUCE:';
                };
                ticket_output = `**LOCATION:**
Store ID:
`+ $('#crm_input')[0].value +`
System Area:
`+ $('#system_input')[0].value +`

Can you recreate the problem on your demo site (if yes please continue, if no use the "Bug - non reproducible" macro)?
`+ $('#replicable_input')[0].value +`

${is_replicable}
${replication_steps}

ACTUAL RESULTS:(Please be as detailed as possible.)
Description:
`+ $('#description_input')[0].value +`

Example:(If this pertains to the customer's site, please provide links to the relevant pages.)
${output_example}

Screenshot:
${screenshot_output}

Video:
${video_output}

EXPECTED RESULTS:
`+ $('#expectation_input')[0].value +`

CONSOLE ERRORS:
`+ $('#console_input')[0].value
                ;
                $('#bug-glitch-ticket')[0].value = ticket_output;
            };
            function copyTicket() {
                // Get the text field
                var copyText = document.getElementById("bug-glitch-ticket");

                // Select the text field
                copyText.select();
                copyText.setSelectionRange(0, 99999); // For mobile devices

                // Copy the text inside the text field
                navigator.clipboard.writeText(copyText.value);

                // Alert the copied text
                //console.log("Copied the text: " + copyText.value);
            }
            function resetCheck(){
                $('div.reset-popup')[0].setAttribute('style','');
            }
            function goBack(){
                $('div.reset-popup')[0].setAttribute('style','display: none;');
            }
        </script>
    </head>
    <body>
        <div style="display: none;" class="reset-popup">
            <h2>Are you sure you want to clear all reset values?</h2>
            <input type="button" value="Reset" onclick="reset()" />
            <input type="button" value="Cancel" onclick="goBack()" />
        </div>
        <div id="input-values">
            <table>
                <tbody>
                    <tr>
                        <td>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>
                                            <label>
                                                CRM
                                            </label>
                                        </td>
                                        <td>
                                            <input id="crm_input" type="text" placeholder="Store ID" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label>
                                                System Area
                                            </label>
                                        </td>
                                        <td>
                                            <input id="system_input" type="text" placeholder="Trouble Area" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label>
                                                Replicable
                                            </label>
                                        </td>
                                        <td>
                                            <select name="replicable" id="replicable_input">
                                                <Option value="Yes">Yes</Option>
                                                <Option value="No">No</Option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label>
                                                (Attempted)Steps<br /> to Reproduce
                                            </label>
                                        </td>
                                        <td>
                                            <textarea id="steps_input" placeholder="Step by Step Instruction"></textarea>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>
                                            <label>
                                                Example
                                            </label>
                                        </td>
                                        <td>
                                            <textarea id="example_input"  placeholder="links or Data. Please seperate using returns"></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label>
                                                Expected
                                            </label>
                                        </td>
                                        <td>
                                            <textarea id="expectation_input"  placeholder="Expected Results."></textarea>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>
                                            <label>
                                                Screenshots
                                            </label>
                                        </td>
                                        <td>
                                            <textarea id="screenshot_input"  placeholder="Screenshot Links. Please seperate using returns"></textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <label>
                                                Video
                                            </label>
                                        </td>
                                        <td>
                                            <textarea id="video_input"  placeholder="Video Link(s). Please seperate using returns"></textarea>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>
                                            <label>
                                                Console <br /> Errors
                                            </label>
                                        </td>
                                        <td>
                                            <textarea style="height: 164px; width: 182px;" id="console_input"  placeholder="Errors found in the console that relate to the issue being reported"></textarea>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            
                        </td>
                    </tr>
                </tbody>
            </table>
            <table>
                <tbody>
                    <tr>
                        <td>
                            <label>
                                Description
                            </label>
                        </td>
                        <td>
                            <textarea style="height: 124px; width: 1032px;" id="description_input" placeholder="Description"></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="input_error">
            Please make sure all inputs have something entered, or have a reason that nothing can be entered.(i.e.:No errors in Console)
        </div>
        <div>
            <input type="button" value="Generate" onclick="checkInputs()" />
            <input type="button" value="Copy" onclick="copyTicket()" />
            <input type="button" value="Reset" onclick="resetCheck()" />
        </div>
        <div>
            <textarea id="bug-glitch-ticket">
**LOCATION:**
Store ID:

System Area:

Can you recreate the problem on your demo site (if yes please continue, if no use the "Bug - non reproducible" macro)?

STEPS TO REPRODUCE:
1.
2.
3.

ACTUAL RESULTS:(Please be as detailed as possible.)
Description:

Example:(If this pertains to the customer's site, please provide links to the relevant pages.)

Screenshot:

Video:

EXPECTED RESULTS:

CONSOLE ERRORS:
            </textarea>
        </div>
    </body>
</html>